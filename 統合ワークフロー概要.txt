### **A. 3DGS環境構築の基本ワークフロー**

#### **フェーズ1：データ取得・前処理**
1. **高密度キャプチャの実施**
   - ダブルグリッドパターンでの撮影（75%以上のオーバーラップ）
   - Nadir（垂直）+ Oblique（0-45度斜め）画像の組み合わせ
   - 露出・フォーカスの固定
   - 推奨ツール：Scaniverse（簡易）/ COLMAP（高精度）

2. **動的オブジェクトの除去**
   - DroneSplatによるアダプティブ・マスキング
   - Rad-GSでの4Dレーダー・カメラ融合（屋外大規模環境）
   - 時系列画像の差分解析

3. **SfM処理**
   - COLMAPによるスパース点群生成
   - カメラパラメータの抽出
   - スケール検証（実測値との照合）

---

#### **フェーズ2：3DGSモデル生成・最適化**

**用途別フレームワーク選択フローチャート：**

```
目的は？
├─ 学習速度最優先 → FastGS（100秒学習）/ Faster-GS（5倍高速化）
├─ 都市スケール → CityGS-X（LOD管理）
├─ 幾何精度重視 → 2DGS / OMeGa / SuGaR
├─ メッシュ抽出必要 → SuGaR（表面整列）
├─ PBR対応 → TexGaussian / 3DGRUT
└─ 動的シーン → 4DGS / D-FCGS（圧縮）
```

**実装手順：**
1. gsplatまたは選択したフレームワークで学習（7-45分）
2. SPZ/圧縮PLY形式でエクスポート（90%サイズ削減）
3. SuperSplatでクリーンアップ（浮遊物除去）

---

### **B. ドローンシミュレーター特化ワークフロー**

#### **フェーズ3：物理統合**

1. **衝突判定レイヤーの構築**
   ```
   選択肢A：メッシュベース（推奨：汎用性）
   → SAGE-3Dで凸包抽出
   → PhysX用にUSD/FBXでエクスポート
   → ArUcoマーカーで位置合わせ（ミリ単位）
   
   選択肢B：微分可能物理（強化学習向け）
   → ContactGaussian-WMで等方性球体定義
   → エンドツーエンド最適化
   ```

2. **動的物理の実装**（オプション）
   - PhysGaussian：MPM（物質点法）統合
   - 破壊・変形・流体シミュレーション

---

#### **フェーズ4：センサシミュレーション**

| センサ種別 | 実装手法 | 物理特性 |
|----------|---------|---------|
| **LiDAR** | SplatAD | 反射強度、レイ消失、ローリングシャッター |
| **カメラ** | Relightable 3DGS | 動的照明、被写界深度、露出 |
| **SLAM** | Splat-Loc / LIV-GaussMap | スケール認識、ドリフト補正 |
| **4Dレーダー** | Rad-GS | ドップラーシフト、マルチパス |

**実装優先度：**
- 手動操縦訓練 → カメラのみで開始
- 自律飛行開発 → LiDAR + SLAM必須
- 悪天候訓練 → 4Dレーダー追加

---

#### **フェーズ5：ハードウェア統合**

**Futaba送信機接続フロー：**

```
送信機モデル確認
├─ 最新機（T16IZ等）
│   → USB-C直結
│   → ゲームコントローラーモード
│   
├─ S-FHSS対応機
│   → WSC-1ワイヤレスアダプタ
│   → 8ch HIDデバイス
│   
└─ 旧型/互換性重視
    → Betaflightパススルー
    → FC経由でUSB HID化
```

**UE5での入力マッピング：**
1. Enhanced Raw Inputプラグイン導入
2. VID/PID識別（16進数指定）
3. 軸正規化（-1.0 ～ +1.0）
4. デッドゾーン・Expo設定
5. 入力遅延測定（目標：20ms以下）

---

#### **フェーズ6：XRレンダリング最適化**

**デバイス別最適化戦略：**

| HMD | 接続方式 | 主要技術 | 目標FPS |
|-----|---------|---------|---------|
| **Quest 3S** | PCVR Link | VRSplat中心窩レンダリング | 120Hz |
| **PICO 4 Ultra** | スタンドアロン | PICOSplat（HLSL最適化） | 90Hz |
| **VIVE Focus 3** | OpenXR | Eye-Tracking LOD | 90Hz |

**VR酔い軽減チェックリスト：**
- [ ] 加速度の線形化（初期は1.4m/s制限）
- [ ] 周辺視野のVignetting実装
- [ ] 固定参照フレーム表示（機体フレーム/計器）
- [ ] 120Hz駆動（可能な場合）

---

#### **フェーズ7：統合プラットフォーム選択**

```
開発目的による選択
├─ 自律飛行AI開発
│   → NVIDIA Isaac Sim
│   → RE3SIMパイプライン
│   → URDF整合性
│   → 合成データ生成（セグメンテーション）
│   
└─ 人間パイロット訓練
    → Unreal Engine 5
    → Xverse 3D-GS / Volinga
    → Niagaraハイブリッド
    → HLODストリーミング
```

---

### **C. 統合実装手順（7ステップ）**

**ステップ1：環境データ取得**
- ダブルグリッド撮影 → COLMAP SfM

**ステップ2：3DGSアセット生成**
- FastGS/Faster-GS学習 → SPZ圧縮

**ステップ3：物理レイヤー重畳**
- SAGE-3D衝突メッシュ抽出 → ArUco位置合わせ

**ステップ4：送信機統合**
- Futaba接続（WSC-1/USB） → Enhanced Input設定

**ステップ5：センサ実装**
- SplatAD（LiDAR） → Relightable 3DGS（カメラ）

**ステップ6：XR最適化**
- VRSplat中心窩レンダリング → デバイス別チューニング

**ステップ7：最終統合**
- Isaac Sim（AI）/ UE5（訓練）へデプロイ

---

### **D. 性能検証チェックポイント**

| 項目 | 目標値 | 測定方法 |
|-----|-------|---------|
| レンダリングFPS | 90-120 | HMD内蔵ツール |
| 入力遅延 | <20ms | Betaflight CLI測定 |
| VRAM使用量 | <8GB | GPU-Z |
| 学習時間 | <5分 | フレームワーク依存 |
| 衝突精度 | ミリ単位 | ArUcoマーカー検証 |

---

## 🎯 クイックスタート推奨パス

**初学者向け（1週間プロトタイプ）：**
1. Scaniverse（スマホ）でキャプチャ
2. gsplat標準版で学習
3. UE5 + Xverse 3D-GS
4. Futaba USB直結
5. Quest 3S PCVR

**プロフェッショナル向け（本格開発）：**
1. ドローン+COLMAPで高精度キャプチャ
2. CityGS-X（大規模）/ FastGS（高速）
3. SAGE-3D物理統合
4. Isaac Sim + RE3SIM
5. SplatAD全センサ実装

